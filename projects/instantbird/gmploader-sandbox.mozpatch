diff --git a/dom/media/gmp/GMPLoader.cpp b/dom/media/gmp/GMPLoader.cpp
--- a/dom/media/gmp/GMPLoader.cpp
+++ b/dom/media/gmp/GMPLoader.cpp
@@ -242,7 +242,7 @@
 
   // Load the GMP.
   PRLibSpec libSpec;
-#ifdef XP_WIN
+#if defined(XP_WIN) && defined(MOZ_SANDBOX)
   int pathLen = MultiByteToWideChar(CP_UTF8, 0, aUTF8LibPath, -1, nullptr, 0);
   if (pathLen == 0) {
     return false;
