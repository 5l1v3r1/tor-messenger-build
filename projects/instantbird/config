# vim: filetype=yaml
version: '[% c("abbrev") %]'
git_url: https://github.com/mozilla/releases-comm-central
git_hash: master
filename: "[% project %]-[% c('version') %]-[% c('var/osname') %]-[% c('var/build_id') %].[% c('var/archive_suffix') %]"
remote_docker: 1
lsb_release:
  id: Ubuntu
  release: 10.04
  codename: lucid
var:
  archive_suffix: tar.bz2
  deps:
    - build-essential
    - libmpc2
    - autotools-dev
    - autoconf2.13
    - python
    - zip
    - libgtk2.0-dev
    - libidl-dev
    - libxt-dev
    - libxml2-dev
    - uuid-runtime
    - imagemagick
    - mesa-common-dev
    - libdbus-1-dev
    - libdbus-glib-1-dev
    - libasound2-dev
    - libgstreamer-plugins-base0.10-dev
    - libpulse-dev
    - ccache
targets:
  windows-i686:
    lsb_release:
      id: Ubuntu
      release: 12.04
      codename: precise
    var:
      archive_suffix: zip
      arch_deps:
        - yasm
  linux-x86_64:
    var:
      arch_deps:
        - yasm-1
  linux-i686:
    var:
      arch_deps:
        - libc6-dev-i386
        - ia32-libs
        - lib32z1-dev
        - lib32asound2-dev
        - yasm-1
input_files:
  - name: mozilla-src
    project: mozilla
    pkg_type: src
  - filename: spi-cacert.der
  - filename: preferences.patch
  - filename: irc.patch
  - filename: xmpp.patch
  - filename: xmpp-resource.patch
  - filename: gtalk-resource.patch
  - filename: accountcreation.patch
  - filename: links.patch
  - filename: picture.patch
  - filename: trafficinfo.patch
  - filename: theme-extension-update.patch
  - filename: installer.patch
  - filename: cert_override.txt
    enable: '[% c("var/windows") %]'
  - filename: fix-mingw-build.patch
    enable: '[% c("var/windows") %]'
  - filename: 'mozconfig-[% c("var/osname") %]'
    name: mozconfig
  - name: python
    project: python
    enable: '[% c("var/linux") %]'
  - name: binutils
    project: binutils
    enable: '[% c("var/linux") %]'
  - name: '[% c("var/compiler") %]'
    project: '[% c("var/compiler") %]'
  - project: docker-image
