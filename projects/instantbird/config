# vim: filetype=yaml sw=2
version: '[% c("abbrev") %]'
hg_url: https://hg.mozilla.org/releases/comm-beta/
hg_hash: THUNDERBIRD_38_0b4_RELEASE
filename: "[% project %]-[% c('version') %]-[% c('var/osname') %]-[% c('var/build_id') %].[% c('var/archive_suffix') %]"
remote_docker: 1
lsb_release:
  id: Ubuntu
  release: 10.04
  codename: lucid
var:
  archive_suffix: tar.bz2
  deps:
    - build-essential
    - libmpc-dev
    - autotools-dev
    - autoconf2.13
    - python
    - zip
    - libgtk2.0-dev
    - libidl-dev
    - libxt-dev
    - libxml2-dev
    - uuid-runtime
    - imagemagick
    - mesa-common-dev
    - libdbus-1-dev
    - libdbus-glib-1-dev
    - libasound2-dev
    - libgstreamer-plugins-base0.10-dev
    - libpulse-dev
    - ccache
targets:
  windows-i686:
    lsb_release:
      id: Ubuntu
      release: 14.10
      codename: utopic
    var:
      archive_suffix: zip
      arch_deps:
        - yasm
  linux-x86_64:
    var:
      arch_deps:
        - yasm-1
  linux-i686:
    var:
      arch_deps:
        - libc6-dev-i386
        - ia32-libs
        - lib32z1-dev
        - lib32asound2-dev
        - yasm-1
  osx-x86_64:
    lsb_release:
      id: Ubuntu
      release: 12.04
      codename: precise
    var:
      arch_deps:
        - yasm
        - rsync
        - sqlite3
input_files:
  - name: mozilla-src
    project: mozilla
    pkg_type: src
  - filename: spi-cacert.der
  - filename: preferences.patch
  - filename: irc.patch
  - filename: gtalk-resource.patch
  - filename: top-protocols.patch
  - filename: disable-links.patch
  - filename: account-picture.patch
  - filename: show-traffic-tor.patch
  - filename: theme-extension-update.patch
  - filename: cert-installer.patch
  - filename: cert_override.txt
  - filename: ctcp-time.patch
  - filename: ctcp-ping.patch
  - filename: xmpp-inband-registration.patch
  - filename: xmppRegister.js
  - filename: xmppRegister.xul
  - filename: xmpp-domain.patch
  - filename: xmpp-resource.patch
  - filename: xmpp-username-split.patch
  - filename: version.patch
  - filename: search-context-menu.patch
  - filename: search-preferences-xul.patch
  - filename: branding/blistWindow.png
  - filename: branding/blistWindow16.png
  - filename: branding/blistWindow48.png
  - filename: branding/convWindow.png
  - filename: branding/convWindow16.png
  - filename: branding/convWindow48.png
  - filename: branding/default.png
  - filename: branding/default16.png
  - filename: branding/default48.png
  - filename: branding/blistWindow.ico
  - filename: branding/convWindow.ico
  - filename: branding/default.ico
  - filename: branding/instantbird.ico
  - filename: branding/name.patch
  - filename: branding/instantbird.icns
  - filename: branding/credits.patch
  - filename: branding/about.png
  - filename: branding/osx.patch
    enable: '[% c("var/osx") %]'
  - filename: osx-saved-application-state.patch
    enable: '[% c("var/osx") %]'
  - filename: fix-mingw-build.patch
    enable: '[% c("var/windows") %]'
  - filename: f2e7cea9bc6a-bug-1150967.patch
    enable: '[% c("var/windows") %]'
  - filename: Bug-9173-Change-the-default-Firefox-profile-director.mozpatch
  - filename: block-plugins.mozpatch
  - filename: 824009fbc42f.mozpatch
    enable: '[% c("var/windows") %]'
  - filename: Bug-1133689-backport-Make-D3DVsyncDisplay-destructor.mozpatch
    enable: '[% c("var/windows") %]'
  - filename: OSX-package-as-tar.bz2.mozpatch
    enable: '[% c("var/osx") %]'
  - filename: Bug-1151345-Firefox-app-menu-sometimes-contains-only.mozpatch
    enable: '[% c("var/osx") %]'
  - filename: 'mozconfig-[% c("var/osname") %]'
    name: mozconfig
  - name: python
    project: python
    enable: '[% c("var/linux") %]'
  - name: binutils
    project: binutils
    enable: '[% c("var/linux") %]'
  - name: gcchost
    project: gcc
    enable: '[% c("var/osx") %]'
  - name: '[% c("var/compiler") %]'
    project: '[% c("var/compiler") %]'
  - project: docker-image
